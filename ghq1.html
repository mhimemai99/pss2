<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Oxford Happiness Questionnaire — Short (8 items)</title>
  <meta name="description" content="Official OHQ Short (8 items). Calculates sum (8–48) and average (1–6) with a brief interpretation.">
  <style>
    :root{
      --bg:#0f1115; --card:#151923; --muted:#a9b3c9; --text:#e6e9ef; --accent:#7c9cff; --good:#39d98a; --warn:#ffcc66; --bad:#ff6b6b;
      --ring:0 0 0 2px var(--accent) inset;
    }
    @media (prefers-color-scheme:light){
      :root{ --bg:#f6f7fb; --card:#ffffff; --muted:#4d5566; --text:#1e2330; --accent:#395dff; --good:#199861; --warn:#b57a00; --bad:#d12f2f; }
    }
    *{box-sizing:border-box}
    body{
      margin:0; font:16px/1.45 system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background:radial-gradient(1200px 600px at 70% -10%, rgba(124,156,255,0.15), transparent 60%),
                 radial-gradient(1000px 600px at -10% 10%, rgba(57,93,255,0.12), transparent 55%), var(--bg);
      color:var(--text);
    }
    header{
      position:sticky; top:0; z-index:5; backdrop-filter:saturate(120%) blur(6px);
      background:linear-gradient(180deg, rgba(21,25,35,.95), rgba(21,25,35,.85)), transparent;
      border-bottom:1px solid rgba(124,156,255,.15);
      padding:.85rem clamp(16px,4vw,28px); margin:0 0 1.25rem 0;
    }
    @media (prefers-color-scheme:light){
      header{ background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.75)); border-bottom:1px solid rgba(57,93,255,.15);}
    }
    .brand{ font-weight:800; letter-spacing:.2px}
    h1{font-size:1.15rem; margin:.15rem 0 .3rem 0; letter-spacing:.2px}
    .sub{font-size:.95rem; color:var(--muted)}
    .wrap{max-width:860px; margin:auto; padding:0 clamp(16px,4vw,28px) 80px}
    .card{
      background:var(--card); border:1px solid rgba(124,156,255,.14); border-radius:14px; padding:18px 16px; margin:16px 0;
      box-shadow:0 10px 30px rgba(0,0,0,.15);
    }
    .intro{font-size:.98rem; color:var(--muted)}
    .scale-legend{display:flex; gap:8px; align-items:center; color:var(--muted); font-size:.9rem; margin:12px 2px 0}
    .legend-pill{border:1px solid rgba(124,156,255,.25); border-radius:999px; padding:6px 10px}
    form{margin:0}
    fieldset{
      border:0; margin:0; padding:14px 12px 10px; border-radius:12px; position:relative;
      transition:background .2s ease;
    }
    fieldset:hover{background:rgba(124,156,255,.06)}
    legend{font-weight:600; padding:0 0 10px 0; width:100%; font-size:1rem}
    .options{
      display:grid; grid-template-columns: repeat(6, minmax(40px,1fr)); gap:8px; width:100%;
    }
    @media (max-width:560px){ .options{grid-template-columns: repeat(3, minmax(70px,1fr));} }
    .opt{
      position:relative; display:flex; align-items:center; justify-content:center; border-radius:11px; cursor:pointer;
      border:1px solid rgba(124,156,255,.28); padding:12px 6px; user-select:none; transition:transform .02s ease, border-color .15s ease, background .15s;
      background:linear-gradient(180deg, rgba(255,255,255,.04), transparent);
      font-weight:600;
    }
    input[type=radio]{position:absolute; inset:0; opacity:0; pointer-events:none}
    input[type=radio]:focus-visible + .opt{box-shadow:var(--ring)}
    input[type=radio]:checked + .opt{ border-color:var(--accent); background:linear-gradient(180deg, rgba(124,156,255,.18), rgba(124,156,255,.08)); }
    .opt small{display:block; font-weight:600; opacity:.9}
    .opt span{display:block; font-size:.7rem; opacity:.7; margin-top:2px}
    .progress{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin:12px 0 2px;
      font-size:.95rem; color:var(--muted)
    }
    progress{ width:100%; height:12px; -webkit-appearance:none; appearance:none;}
    progress::-webkit-progress-bar{background:rgba(124,156,255,.15); border-radius:999px}
    progress::-webkit-progress-value{background:var(--accent); border-radius:999px}
    progress::-moz-progress-bar{background:var(--accent); border-radius:999px}
    .actions{
      position:sticky; bottom:0; z-index:4; margin:24px 0 0; padding:14px clamp(16px,4vw,28px);
      background:linear-gradient(180deg, rgba(21,25,35,.02), rgba(21,25,35,.45) 45%, rgba(21,25,35,.85) 85%),
                 linear-gradient(180deg, rgba(0,0,0,0), var(--bg));
      display:flex; gap:10px; border-top:1px solid rgba(124,156,255,.12);
    }
    @media (prefers-color-scheme:light){ .actions{ background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,.95)); border-top:1px solid rgba(57,93,255,.12); } }
    button{
      appearance:none; border:0; border-radius:12px; padding:12px 16px; font-weight:700; cursor:pointer;
      background:var(--accent); color:white; min-width:120px; letter-spacing:.3px; transition:transform .02s ease, opacity .2s ease;
    }
    button[disabled]{opacity:.5; cursor:not-allowed}
    .btn-secondary{ background:transparent; color:var(--text); border:1px solid rgba(124,156,255,.35)}
    .result{
      margin:14px 0 0; padding:18px; border-radius:14px; border:1px solid rgba(124,156,255,.2); background:linear-gradient(180deg, rgba(124,156,255,.1), transparent 58%), var(--card);
    }
    .score{ font-size:2.2rem; font-weight:800; letter-spacing:.2px; margin:0 0 .25rem 0 }
    .band{ font-weight:800; margin:.15rem 0 .4rem 0 }
    .desc{ color:var(--muted); margin:0 }
    .pill{ display:inline-block; border:1px solid rgba(124,156,255,.3); border-radius:999px; padding:4px 10px; font-size:.82rem; margin-right:8px; }
    .bad{ border-color:rgba(255,107,107,.4); color:var(--bad)} .warn{ border-color:rgba(255,204,102,.45); color:var(--warn)} .good{ border-color:rgba(57,217,138,.4); color:var(--good)}
    .tools{ display:flex; gap:8px; margin-top:12px; }
    .tiny{font-size:.78rem; color:var(--muted)}
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace }
  </style>
</head>
<body>
  <header>
    <div class="brand">CLE9032 · Emotional Happiness</div>
    <h1>Oxford Happiness Questionnaire — Short (8 items)</h1>
    <div class="sub">Answer each statement from <strong>1</strong> (strongly disagree) to <strong>6</strong> (strongly agree).</div>
  </header>

  <div class="wrap">
    <section class="card">
      <p class="intro">
        The official short OHQ has <strong>8 items</strong>. Your official score is the <strong>sum (8–48)</strong>.
        For easier interpretation in class, we also show the <strong>average (1–6)</strong>.
        <span class="tiny">This is a brief check‑in, not a diagnosis.</span>
      </p>

      <div class="scale-legend">
        <div class="legend-pill">1 — Strongly disagree</div>
        <div class="legend-pill">3 — Slightly disagree</div>
        <div class="legend-pill">4 — Slightly agree</div>
        <div class="legend-pill">6 — Strongly agree</div>
      </div>

      <form id="ohq" novalidate></form>

      <div class="progress" aria-live="polite">
        <div><span id="answered">0</span>/<span id="total">8</span> answered</div>
        <progress id="bar" max="8" value="0" aria-label="progress"></progress>
      </div>
    </section>

    <section id="result" class="result" hidden aria-live="polite" aria-atomic="true"></section>

    <p class="tiny">
      Interpretation bands use the 1–6 average to match classroom materials. Your official OHQ‑Short total (8–48) is also shown.
      Results stay on your device.
    </p>
  </div>

  <div class="actions">
    <button class="btn-secondary" type="button" id="resetBtn">Reset</button>
    <button id="submitBtn" disabled>See my score</button>
  </div>

<script>
/* Oxford Happiness Questionnaire — Short (8 items)
   Scale: 1=strongly disagree … 6=strongly agree
   Reverse-scored items: 1, 4, 8. (Not shown in UI)
   Official score = SUM (8–48). We also show AVERAGE (1–6) to align with class bands.
*/

const items = [
  { text: "I don\u2019t feel particularly pleased with the way I am.", reverse:true }, // 1
  { text: "I feel that life is very rewarding.", reverse:false },                   // 2
  { text: "I am well satisfied about everything in my life.", reverse:false },      // 3
  { text: "I don\u2019t think I look attractive.", reverse:true },                   // 4
  { text: "I find beauty in some things.", reverse:false },                         // 5
  { text: "I can fit in everything I want to.", reverse:false },                    // 6
  { text: "I feel fully mentally alert.", reverse:false },                          // 7
  { text: "I do not have particularly happy memories of the past.", reverse:true }  // 8
];

const form = document.getElementById('ohq');
const totalEl = document.getElementById('total');
const answeredEl = document.getElementById('answered');
const bar = document.getElementById('bar');
const submitBtn = document.getElementById('submitBtn');
const resetBtn = document.getElementById('resetBtn');
const resultBox = document.getElementById('result');

function render(){
  totalEl.textContent = items.length;
  bar.max = items.length;

  items.forEach((it, idx) => {
    const fs = document.createElement('fieldset');
    const lg = document.createElement('legend');
    lg.textContent = (idx+1) + ". " + it.text;
    fs.appendChild(lg);

    const opts = document.createElement('div');
    opts.className = "options";

    for(let v=1; v<=6; v++){
      const id = `q${idx}_${v}`;
      const input = document.createElement('input');
      input.type = 'radio';
      input.name = `q${idx}`;
      input.id = id;
      input.value = String(v);
      input.required = true;

      const label = document.createElement('label');
      label.className = 'opt';
      label.setAttribute('for', id);
      label.innerHTML = `<small>${v}</small><span>${v===1?"SD":v===2?"MD":v===3?"SLD":v===4?"SLA":v===5?"MA":"SA"}</span>`;

      const wrap = document.createElement('div');
      wrap.style.position = 'relative';
      wrap.appendChild(input);
      wrap.appendChild(label);
      opts.appendChild(wrap);
    }

    fs.appendChild(opts);
    form.appendChild(fs);
  });

  form.addEventListener('change', () => {
    updateProgress();
    if (bar.value === items.length) calculate(); // auto-display when complete
  });
}

function updateProgress(){
  const answered = new Set([...new FormData(form).keys()]).size;
  answeredEl.textContent = answered;
  bar.value = answered;
  submitBtn.disabled = answered !== items.length;
  if(answered !== items.length){ resultBox.hidden = true; }
}

function approxEqual(a,b,eps=0.05){ return Math.abs(a-b) <= eps; }

function interpret(avg){
  // Matches the bands used in class slides (1–2, 2–3, 3–4, ~4, 4–5, 5–6, ~6).
  let band="", desc="", pillClass="warn";
  if(avg <= 2){
    band="Not happy (1–2)"; desc="Your current happiness looks low. Scores can reflect your week; if this persists, consider support."; pillClass="bad";
  } else if(avg <= 3){
    band="Somewhat unhappy (2–3)"; desc="Below neutral. Try small, evidence‑based habits and track change."; pillClass="warn";
  } else if(avg < 4){
    band="Neutral (3–4)"; desc="Not especially happy or unhappy. Notice what lifts or lowers your mood across a week."; pillClass="warn";
  } else if(approxEqual(avg,4)){
    band="Somewhat / moderately happy (~4)"; desc="Around the common mid‑range. Keep what works; add small, sustainable tweaks."; pillClass="good";
  } else if(avg < 5){
    band="Rather happy (4–5)"; desc="Pretty happy overall. Strengthen what sustains this (relationships, purpose, routines)."; pillClass="good";
  } else if(avg < 6){
    band="Very happy (5–6)"; desc="Consistently positive. Maintain balance; normal ups/downs will still happen."; pillClass="good";
  } else {
    band="Extremely happy (6)"; desc="Maximal scores are uncommon. Aim for balanced, sustainable wellbeing over ‘max at all times’."; pillClass="good";
  }
  return {band, desc, pillClass};
}

function calculate(e){
  if(e) e.preventDefault();
  const data = new FormData(form);
  let sum = 0;
  items.forEach((it, i) => {
    const raw = Number(data.get(`q${i}`));
    const val = it.reverse ? (7 - raw) : raw; // reverse-score 1↔6, 2↔5, 3↔4
    sum += val;
  });
  const avg = sum / items.length;
  const {band, desc, pillClass} = interpret(avg);

  const summary = `OHQ‑Short: Total ${sum}/48, Average ${avg.toFixed(2)}/6 — ${band}. ${desc}`;
  try { localStorage.setItem("cle9032_ohq8", JSON.stringify({sum, avg, band, at: new Date().toISOString()})); } catch(_){}

  resultBox.innerHTML = `
    <div class="score">${sum} <span class="mono muted">/ 48</span></div>
    <div class="pill ${pillClass}">Avg: ${avg.toFixed(2)} / 6</div>
    <div class="band">${band}</div>
    <p class="desc">${desc}</p>
    <div class="tools">
      <button type="button" class="btn-secondary" id="copyBtn">Copy summary</button>
      <button type="button" class="btn-secondary" id="lastBtn">Show last saved</button>
    </div>
    <p class="tiny" style="margin-top:8px">Tip: screenshot to save your result.</p>
  `;
  resultBox.hidden = false;

  document.getElementById('copyBtn').onclick = async () => {
    try { await navigator.clipboard.writeText(summary); alert("Copied to clipboard."); }
    catch(err){ alert("Copy failed — select and copy manually."); }
  };
  document.getElementById('lastBtn').onclick = () => {
    const raw = localStorage.getItem("cle9032_ohq8");
    if(!raw){ alert("No previous result saved on this device."); return; }
    try{
      const last = JSON.parse(raw);
      const when = new Date(last.at).toLocaleString();
      alert(`Last saved result\nTotal: ${last.sum}/48\nAverage: ${Number(last.avg).toFixed(2)}/6 (${last.band})\nWhen: ${when}`);
    }catch(_){ alert("Could not read previous result."); }
  };
  resultBox.scrollIntoView({behavior:"smooth", block:"start"});
}

function resetAll(){
  form.reset(); updateProgress(); resultBox.hidden = true;
}

render();
updateProgress();

form.addEventListener('submit', calculate);
submitBtn.addEventListener('click', (e) => { if(!submitBtn.disabled) form.requestSubmit(); });
resetBtn.addEventListener('click', resetAll);
</script>
</body>
</html>
